<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>无标题文档</title>
<style type="text/css">
#outer{ width:70%; height:100px; overflow:hidden; margin:100px auto;}
#inner{ width:500%;  height:100%; transition-duration:0.7s; }
#inner div{ width:20%; height:100%; background:red; text-align:center; font-size:24px; float:left;}
</style>
</head>

<body>
<div id="outer">
	<div id="inner">
    	<div>1</div><div style="background:green;">2</div><div style="background:black; color:white;">3</div><div style="background:blue; ">4</div><div style="background:yellow;">5</div>
    </div>
</div>
</body>
</html>
<script>

function start(e){
	this.startX=e.changedTouches[0].pageX;//保存手势的原始位置
	this.abcclick=false;//用来判断是touch还是click，和这里的移动没有关系
}
function move(e){
	var change=e.changedTouches[0].pageX-this.startX;//算出手势移动的距离 
	//当前的位置=原来的位置+鼠标移动的距离
	//原来的位置怎么计算？很像焦点图。
	/*
		this.offsetWidth它本身的宽是每一帧的距离，每一次完整的移动，都是从当前这一帧到下一帧，也就是每次都会移动this.offsetWidth这些距离
	//第一张的位置从那开始：0
	//第二张的位置从那开始：-1*this.offsetWidth;
	//第三张的位置从那开始:-index*this.offsetWidth;
	*/
	this.parentNode.style.transform="translate("+(-this.index*this.offsetWidth+change)+"px,0)";
	
	//以下代码是为touchend事件准备的
	var index=this.index;	
	console.log(change,index);
	if(change>0){//这是在判断方向，现在算出来，用在end方法（就是用在touchend事件里）
		//向右
		this.parentNode.index=--index	
	}else if(change<0){
		//向左
		this.parentNode.index=++index;//从0到1，从1到2
	}else{
		//这样就算click事件
		this.abcclick=true;	
	}
	
}

function end(e){
	this.parentNode.style.transform="translate("+(-this.parentNode.index*this.offsetWidth)+"px,0)";
	
	if(this.abcclick){
		//这里执行和click相关的方法	
	}
}

var oDivs=document.getElementById("inner").getElementsByTagName("div");
[].forEach.call(oDivs,function(ele,i){
	ele.index=i;
	ele.addEventListener("touchstart",start);
	ele.addEventListener("touchmove",move);
	ele.addEventListener("touchend",end);
});
</script>
